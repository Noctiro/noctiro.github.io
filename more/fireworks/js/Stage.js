const Ticker=function(i){"use strict";const t={addListener:function(t){if("function"!=typeof t)throw"Ticker.addListener() requires a function reference passed for a callback.";s.push(t),e||(e=!0,h())}};let e=!1,n=0,s=[];function h(){(i.requestAnimationFrame?requestAnimationFrame:webkitRequestAnimationFrame)(a)}function a(t){let e=t-n;n=t,e<0?e=17:68<e&&(e=68),s.forEach(t=>t.call(i,e,e/16.6667)),h()}return t}(window),Stage=function(e,i,n){"use strict";let s=0;function h(t){"string"==typeof t&&(t=i.getElementById(t)),this.canvas=t,this.ctx=t.getContext("2d"),this.canvas.style.touchAction="none",this.speed=1,this.dpr=h.disableHighDPI?1:(e.devicePixelRatio||1)/(this.ctx.backingStorePixelRatio||1),this.width=t.width,this.height=t.height,this.naturalWidth=this.width*this.dpr,this.naturalHeight=this.height*this.dpr,this.width!==this.naturalWidth&&(this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px"),h.stages.push(this),this._listeners={resize:[],pointerstart:[],pointermove:[],pointerend:[],lastPointerPos:{x:0,y:0}}}return h.stages=[],h.disableHighDPI=!1,h.prototype.addEventListener=function(t,e){try{"ticker"===t?n.addListener(e):this._listeners[t].push(e)}catch(t){throw"Invalid Event"}},h.prototype.dispatchEvent=function(t,e){const i=this._listeners[t];if(!i)throw"Invalid Event";i.forEach(t=>t.call(this,e))},h.prototype.resize=function(t,e){this.width=t,this.height=e,this.naturalWidth=t*this.dpr,this.naturalHeight=e*this.dpr,this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.dispatchEvent("resize")},h.windowToCanvas=function(t,e,i){var n=t.getBoundingClientRect();return{x:(e-n.left)*(t.width/n.width),y:(i-n.top)*(t.height/n.height)}},h.mouseHandler=function(n){if(!(Date.now()-s<500)){let i="start";"mousemove"===n.type?i="move":"mouseup"===n.type&&(i="end"),h.stages.forEach(t=>{var e=h.windowToCanvas(t.canvas,n.clientX,n.clientY);t.pointerEvent(i,e.x/t.dpr,e.y/t.dpr)})}},h.touchHandler=function(t){s=Date.now();let n="start";"touchmove"===t.type?n="move":"touchend"===t.type&&(n="end"),h.stages.forEach(e=>{for(var i of Array.from(t.changedTouches)){let t;"end"!==n?(t=h.windowToCanvas(e.canvas,i.clientX,i.clientY),e._listeners.lastPointerPos=t,"start"===n&&e.pointerEvent("move",t.x/e.dpr,t.y/e.dpr)):t=e._listeners.lastPointerPos,e.pointerEvent(n,t.x/e.dpr,t.y/e.dpr)}})},h.prototype.pointerEvent=function(t,e,i){const n={type:t,x:e,y:i};n.onCanvas=0<=e&&e<=this.width&&0<=i&&i<=this.height,this.dispatchEvent("pointer"+t,n)},i.addEventListener("mousedown",h.mouseHandler),i.addEventListener("mousemove",h.mouseHandler),i.addEventListener("mouseup",h.mouseHandler),i.addEventListener("touchstart",h.touchHandler),i.addEventListener("touchmove",h.touchHandler),i.addEventListener("touchend",h.touchHandler),h}(window,document,Ticker);